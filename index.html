<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>动词大冒险 - Cost, Spend, Pay, Take</title>
    <style>
        /* 统一字体设置 */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: #f0f8ff;
            margin: 0;
            padding: 20px;
            color: #333;
            background-image: url('https://img.freepik.com/free-vector/hand-drawn-school-background_23-2149464866.jpg');
            background-size: cover;
            font-size: 16px;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            line-height: 1.5;
        }
        
        /* 标题字体 */
        h1, h2, h3 {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            font-weight: 600;
        }
        
        h1 {
            color: #ff6b6b;
            text-align: center;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
            background-color: rgba(255, 255, 255, 0.8);
            padding: 15px;
            border-radius: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            font-size: 1.5rem;
        }
        
        /* 卡片内容字体 */
        .verb-title, .example, .description, .quiz-result, .game-card {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }
        
        .verb-title {
            font-weight: 600;
            font-size: 1.3rem;
            color: #4d96ff;
            margin-bottom: 10px;
            text-align: center;
        }
        
        .example {
            font-style: italic;
            font-size: 1rem;
            font-weight: 500;
        }
        
        .description {
            font-size: 0.95rem;
            font-weight: 400;
        }
        
        /* 按钮字体 */
        .quiz-button, .game-button, .quiz-options button {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            font-weight: 500;
        }
        
        /* 游戏卡片字体 */
        .game-card {
            font-size: 1.1rem;
            font-weight: 500;
        }
        
        /* 移动端适配 - 只调整布局，不改变字体 */
        @media (max-width: 768px) {
            * {
                font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, Roboto, "Helvetica Neue", Arial, sans-serif !important;
                -webkit-font-smoothing: antialiased !important;
                -moz-osx-font-smoothing: grayscale !important;
            }
            body {
                padding: 10px;
            }
            .verb-card {
                width: 100%;
                max-width: 300px;
            }
            #game-board {
                grid-template-columns: repeat(2, 1fr);
            }
            .game-card {
                height: 70px;
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <h1>🚀 动词大冒险 - Cost, Spend, Pay, Take</h1>
    <p style="text-align: center; font-size: 18px; background-color: rgba(255, 255, 255, 0.8); padding: 10px; border-radius: 10px;">
        点击卡片学习，然后完成挑战！
    </p>

    <div class="verb-container">
        <!-- Cost Card -->
        <div class="verb-card" onclick="toggleCard(this, event); playSound('click')">
            <div class="emoji">💰</div>
            <div class="verb-title">Cost</div>
            <div class="example">"This toy costs $10."</div>
            <div class="hidden-content">
                <div class="description">
                    <strong>用法：</strong> "cost" 表示某物"花费多少钱"，主语是物品。<br><br>
                    <strong>例句：</strong>
                    <ul>
                        <li>This phone costs a lot!</li>
                        <li>How much does it cost?</li>
                    </ul>
                    <button onclick="playSound('cost'); event.stopPropagation();" style="background-color: #ffcc00; margin-top: 10px;">🔊 听发音</button>
                </div>
            </div>
        </div>

        <!-- Spend Card -->
        <div class="verb-card" onclick="toggleCard(this, event); playSound('click')">
            <div class="emoji">💸</div>
            <div class="verb-title">Spend</div>
            <div class="example">"I spend $5 on candy."</div>
            <div class="hidden-content">
                <div class="description">
                    <strong>用法：</strong> "spend" 表示人"花钱或时间"，主语是人。<br><br>
                    <strong>例句：</strong>
                    <ul>
                        <li>She spends too much on clothes.</li>
                        <li>I spend 2 hours doing homework.</li>
                    </ul>
                    <button onclick="playSound('spend'); event.stopPropagation();" style="background-color: #ffcc00; margin-top: 10px;">🔊 听发音</button>
                </div>
            </div>
        </div>

        <!-- Pay Card -->
        <div class="verb-card" onclick="toggleCard(this, event); playSound('click')">
            <div class="emoji">💳</div>
            <div class="verb-title">Pay</div>
            <div class="example">"I pay $20 for the book."</div>
            <div class="hidden-content">
                <div class="description">
                    <strong>用法：</strong> "pay" 表示"支付"，对象可以是钱或人。<br><br>
                    <strong>例句：</strong>
                    <ul>
                        <li>Can you pay me back next week?</li>
                        <li>He paid $50 for the shoes.</li>
                    </ul>
                    <button onclick="playSound('pay'); event.stopPropagation();" style="background-color: #ffcc00; margin-top: 10px;">🔊 听发音</button>
                </div>
            </div>
        </div>

        <!-- Take Card -->
        <div class="verb-card" onclick="toggleCard(this, event); playSound('click')">
            <div class="emoji">⏳</div>
            <div class="verb-title">Take</div>
            <div class="example">"It takes 1 hour to go there."</div>
            <div class="hidden-content">
                <div class="description">
                    <strong>用法：</strong> "take" 指"花费时间"，主语常是活动。<br><br>
                    <strong>例句：</strong>
                    <ul>
                        <li>It takes 5 minutes to walk to school.</li>
                        <li>Learning English takes time.</li>
                    </ul>
                    <button onclick="playSound('take'); event.stopPropagation();" style="background-color: #ffcc00; margin-top: 10px;">🔊 听发音</button>
                </div>
            </div>
        </div>
    </div>

    <div id="progress-bar">
        <div id="progress"></div>
    </div>

    <button class="quiz-button" onclick="startQuiz(); playSound('click')">📝 挑战小测验</button>
    <button class="game-button" onclick="startGame(); playSound('click')">🎮 记忆配对游戏</button>

    <div id="quiz-section">
        <h3 style="color: #4d96ff; text-align: center;">📝 动词小测验</h3>
        <p style="text-align: center;">完成3道题获得金币奖励！</p>
        
        <div class="quiz-question">
            <p>1. This hamburger ____ $5.</p>
            <div class="quiz-options">
                <button onclick="checkAnswer(1, 'cost'); playSound('click')">cost</button>
                <button onclick="checkAnswer(1, 'spend'); playSound('click')">spend</button>
                <button onclick="checkAnswer(1, 'pay'); playSound('click')">pay</button>
                <button onclick="checkAnswer(1, 'take'); playSound('click')">take</button>
            </div>
            <div id="quiz-result1" class="quiz-result"></div>
        </div>

        <div class="quiz-question">
            <p>2. I always ____ one hour reading every night.</p>
            <div class="quiz-options">
                <button onclick="checkAnswer(2, 'cost'); playSound('click')">cost</button>
                <button onclick="checkAnswer(2, 'spend'); playSound('click')">spend</button>
                <button onclick="checkAnswer(2, 'pay'); playSound('click')">pay</button>
                <button onclick="checkAnswer(2, 'take'); playSound('click')">take</button>
            </div>
            <div id="quiz-result2" class="quiz-result"></div>
        </div>

        <div class="quiz-question">
            <p>3. Did you ____ for your lunch yet?</p>
            <div class="quiz-options">
                <button onclick="checkAnswer(3, 'cost'); playSound('click')">cost</button>
                <button onclick="checkAnswer(3, 'spend'); playSound('click')">spend</button>
                <button onclick="checkAnswer(3, 'pay'); playSound('click')">pay</button>
                <button onclick="checkAnswer(3, 'take'); playSound('click')">take</button>
            </div>
            <div id="quiz-result3" class="quiz-result"></div>
        </div>

        <div id="quiz-summary" style="text-align: center; font-size: 18px;"></div>
    </div>

    <div id="game-section">
        <h3 style="color: #4d96ff;">🎮 动词记忆配对游戏</h3>
        <p>找出所有配对的动词和例句！</p>
        <div id="score-display">得分: 0</div>
        <div id="game-board"></div>
        <button onclick="resetGame(); playSound('click')" style="background-color: #4d96ff; color: white; border: none; padding: 10px 15px; border-radius: 20px; cursor: pointer; margin-top: 10px;">重新开始</button>
    </div>

    <audio id="click-sound" src="https://assets.mixkit.co/sfx/preview/mixkit-arcade-game-jump-coin-216.mp3"></audio>
    <audio id="correct-sound" src="https://assets.mixkit.co/sfx/preview/mixkit-correct-answer-tone-2870.mp3"></audio>
    <audio id="wrong-sound" src="https://assets.mixkit.co/sfx/preview/mixkit-wrong-answer-fail-notification-946.mp3"></audio>
    <audio id="win-sound" src="https://assets.mixkit.co/sfx/preview/mixkit-achievement-bell-600.mp3"></audio>
    <audio id="celebration-sound" src="https://assets.mixkit.co/sfx/preview/mixkit-happy-crowd-cheer-964.mp3"></audio>
    <audio id="cost-sound" src="https://ssl.gstatic.com/dictionary/static/sounds/20200429/cost--_gb_1.mp3"></audio>
    <audio id="spend-sound" src="https://ssl.gstatic.com/dictionary/static/sounds/20200429/spend--_gb_1.mp3"></audio>
    <audio id="pay-sound" src="https://ssl.gstatic.com/dictionary/static/sounds/20200429/pay--_gb_1.mp3"></audio>
    <audio id="take-sound" src="https://ssl.gstatic.com/dictionary/static/sounds/20200429/take--_gb_1.mp3"></audio>

    <script>
        // 音效播放
        function playSound(type) {
            const sound = document.getElementById(`${type}-sound`);
            if (sound) {
                sound.currentTime = 0;
                sound.play();
            }
        }

        // 点击展开卡片
        function toggleCard(card, event) {
            // 检查点击是否来自发音按钮
            if (event && event.target.tagName === 'BUTTON' && event.target.textContent.includes('🔊')) {
                return; // 如果是发音按钮点击，不切换卡片状态
            }
            card.classList.toggle("active");
        }

        // 测验相关变量
        let quizScore = 0;
        let gameScore = 0;
        let progress = 0;
        const totalTasks = 2; // 测验和游戏两个任务

        // 开始测验
        function startQuiz() {
            document.getElementById("quiz-section").style.display = "block";
            document.getElementById("game-section").style.display = "none";
            resetQuiz();
        }

        // 重置测验
        function resetQuiz() {
            quizScore = 0;
            document.querySelectorAll(".quiz-result").forEach(el => {
                el.innerHTML = "";
                el.className = "quiz-result";
            });
            document.getElementById("quiz-summary").innerHTML = "";
        }

        // 检查答案
        function checkAnswer(questionNum, chosenAnswer) {
            const correctAnswers = {
                1: "cost",
                2: "spend",
                3: "pay"
            };

            const resultElement = document.getElementById(`quiz-result${questionNum}`);
            if (chosenAnswer === correctAnswers[questionNum]) {
                resultElement.innerHTML = "✅ 答对了！";
                resultElement.className = "quiz-result correct";
                quizScore++;
                playSound('correct');
                
                // 检查是否所有问题都答对了
                if (quizScore === 3) {
                    document.getElementById("quiz-summary").innerHTML = "🎉 太棒了！你全部答对了！获得50金币！";
                    playSound('win');
                    updateProgress();
                    createConfetti();
                }
            } else {
                let explanation = "";
                switch (correctAnswers[questionNum]) {
                    case "cost":
                        explanation = "❌ 不对哦！'cost' 是说东西值多少钱。";
                        break;
                    case "spend":
                        explanation = "❌ 不对哦！'spend' 是人花时间或钱。";
                        break;
                    case "pay":
                        explanation = "❌ 不对哦！'pay' 是付款的意思。";
                        break;
                }
                resultElement.innerHTML = `${explanation}`;
                resultElement.className = "quiz-result incorrect";
                playSound('wrong');
            }
        }

        // 记忆游戏相关
        const gamePairs = [
            { word: "cost", example: "This costs $10" },
            { word: "spend", example: "I spend time" },
            { word: "pay", example: "Pay for lunch" },
            { word: "take", example: "It takes time" }
        ];
        
        let gameCards = [];
        let flippedCards = [];
        let matchedPairs = 0;

        // 开始游戏
        function startGame() {
            document.getElementById("game-section").style.display = "block";
            document.getElementById("quiz-section").style.display = "none";
            resetGame();
        }

        // 重置游戏
        function resetGame() {
            gameScore = 0;
            matchedPairs = 0;
            document.getElementById("score-display").textContent = "得分: 0";
            
            // 创建游戏卡片
            gameCards = [];
            const allPairs = [...gamePairs, ...gamePairs]; // 复制一份用于配对
            allPairs.sort(() => Math.random() - 0.5); // 随机排序
            
            const gameBoard = document.getElementById("game-board");
            gameBoard.innerHTML = "";
            
            allPairs.forEach((pair, index) => {
                const card = document.createElement("div");
                card.className = "game-card";
                card.dataset.index = index;
                card.dataset.word = pair.word;
                card.dataset.example = pair.example;
                card.addEventListener("click", flipCard);
                gameBoard.appendChild(card);
                gameCards.push({
                    element: card,
                    word: pair.word,
                    example: pair.example,
                    flipped: false,
                    matched: false
                });
            });
        }

        // 翻转卡片
        function flipCard() {
            const index = this.dataset.index;
            const card = gameCards[index];
            
            // 如果卡片已经翻开或已匹配，则不做任何操作
            if (card.flipped || card.matched || flippedCards.length >= 2) {
                return;
            }
            
            // 翻开卡片
            card.flipped = true;
            this.textContent = card.word === card.example ? card.word : card.example;
            this.classList.add("flipped");
            flippedCards.push(card);
            playSound('click');
            
            // 检查是否匹配
            if (flippedCards.length === 2) {
                const card1 = flippedCards[0];
                const card2 = flippedCards[1];
                
                // 检查是否匹配（单词配例句）
                if ((card1.word === card2.word && card1.example === card2.example) || 
                    (card1.word === card2.example || card1.example === card2.word)) {
                    // 匹配成功
                    setTimeout(() => {
                        card1.matched = true;
                        card2.matched = true;
                        card1.element.style.visibility = "hidden";
                        card2.element.style.visibility = "hidden";
                        flippedCards = [];
                        matchedPairs++;
                        gameScore += 10;
                        document.getElementById("score-display").textContent = `得分: ${gameScore}`;
                        playSound('correct');
                        
                        // 检查游戏是否结束
                        if (matchedPairs === gamePairs.length) {
                            document.getElementById("score-display").textContent += " 🎉 恭喜完成！获得30金币！";
                            playSound('celebration');
                            updateProgress();
                            createConfetti();
                        }
                    }, 500);
                } else {
                    // 不匹配
                    setTimeout(() => {
                        card1.flipped = false;
                        card2.flipped = false;
                        card1.element.textContent = "";
                        card2.element.textContent = "";
                        card1.element.classList.remove("flipped");
                        card2.element.classList.remove("flipped");
                        flippedCards = [];
                        playSound('wrong');
                    }, 1000);
                }
            }
        }

        // 更新进度条
        function updateProgress() {
            progress += 50; // 每个任务完成增加50%
            if (progress > 100) progress = 100;
            document.getElementById("progress").style.width = `${progress}%`;
            
            if (progress === 100) {
                document.getElementById("progress").classList.add("task-completed");
                setTimeout(() => {
                    alert("🏆 恭喜你完成了所有挑战！你是动词小专家！");
                }, 1000);
            }
        }

        // 创建庆祝彩花
        function createConfetti() {
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement("div");
                confetti.className = "confetti";
                confetti.style.left = `${Math.random() * 100}vw`;
                confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 50%)`;
                confetti.style.animationDuration = `${Math.random() * 2 + 1}s`;
                document.body.appendChild(confetti);
                
                // 移除彩花元素
                setTimeout(() => {
                    confetti.remove();
                }, 3000);
            }
        }
    </script>
</body>
</html>
